name: Static Analysis

on: [push, pull_request]

jobs:
  cppcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Install Cppcheck
        run: sudo apt-get install -y cppcheck

      - name: Run Cppcheck
        # Check src folder, ignore external dependencies, enable warning/style/performance checks
        run: |
          cppcheck --enable=warning,performance,portability \
                   --suppress=missingIncludeSystem \
                   --inline-suppr \
                   --std=c++17 \
                   --language=c++ \
                   --force \
                   -I include \
                   src/ \
                   -i external/
